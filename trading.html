<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–°–∏–º—É–ª—è—Ç–æ—Ä —Ç—Ä–µ–π–¥–∏–Ω–≥–∞ | –®–ø–∞—Ä–≥–∞–ª–∫–∞ –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞</title>
  <link rel="stylesheet" href="style.css">

  <script src="https://cdn.jsdelivr.net/npm/lightweight-charts@4.2.0/dist/lightweight-charts.standalone.production.js"></script>
</head>
<body>
  <header>
    <div class="container header-container">
      <h1 class="logo">–®–ø–∞—Ä–≥–∞–ª–∫–∞ –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞</h1>
      <nav>
        <ul class="nav-links">
          <li><a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a></li>
          <li><a href="calculators.html">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä—ã</a></li>
          <li><a href="articles.html">–°—Ç–∞—Ç—å–∏</a></li>
          <li><a href="trading.html" class="active">–°–∏–º—É–ª—è—Ç–æ—Ä</a></li>
          <li><a href="about.html">–û –ø—Ä–æ–µ–∫—Ç–µ</a></li>
          <li><a href="contacts.html">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main class="container">
    <h2>–°–∏–º—É–ª—è—Ç–æ—Ä —Ç—Ä–µ–π–¥–∏–Ω–≥–∞</h2>
    <p class="intro-text">–°–ª–µ–¥–∏—Ç–µ –∑–∞ –¥–∏–Ω–∞–º–∏–∫–æ–π —Ü–µ–Ω—ã –∞–∫—Ç–∏–≤–∞ –∏ –ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∫—É–ø–∞—Ç—å –∏ –ø—Ä–æ–¥–∞–≤–∞—Ç—å –∞–∫—Ü–∏–∏. –ì—Ä–∞—Ñ–∏–∫ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.</p>

    <section class="simulator">
      <div class="sim-info">
        <p><strong>–ê–∫—Ç–∏–≤:</strong> GAZP</p>
        <p><strong>–¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞:</strong> <span id="price">100.00</span> ‚ÇΩ</p>
        <p><strong>–ë–∞–ª–∞–Ω—Å:</strong> <span id="balance">100000.00</span> ‚ÇΩ</p>
        <p><strong>–ê–∫—Ü–∏–π –Ω–∞ —Ä—É–∫–∞—Ö:</strong> <span id="stocks">0</span></p>
        <p><strong>–°—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ—Ä—Ç—Ñ–µ–ª—è:</strong> <span id="portfolio">100000.00</span> ‚ÇΩ</p>
      </div>

      <div class="sim-buttons">
        <input id="lotCount" type="number" min="1" value="1" style="width:80px; text-align:center; padding:5px;">
        <button id="buy">–ö—É–ø–∏—Ç—å</button>
        <button id="sell">–ü—Ä–æ–¥–∞—Ç—å</button>
      </div>

      <div class="chart-container" style="height: 400px;">
        <div id="chart"></div>
      </div>

      <div id="log" class="sim-log">–û–∂–∏–¥–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö...</div>
    </section>
  </main>

  <footer>
    <div class="container footer-container">
      <div class="footer-columns">
        <div class="footer-col">
          <h4>–û –ø—Ä–æ–µ–∫—Ç–µ</h4>
          <p>¬´–®–ø–∞—Ä–≥–∞–ª–∫–∞ –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞¬ª ‚Äî —É—á–µ–±–Ω—ã–π —Å–∞–π—Ç —Å –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞–º–∏, —Å—Ç–∞—Ç—å—è–º–∏ –∏ —Å–∏–º—É–ª—è—Ç–æ—Ä–æ–º —Ç–æ—Ä–≥–æ–≤–ª–∏ –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤.</p>
        </div>
        <div class="footer-col">
          <h4>–ù–∞–≤–∏–≥–∞—Ü–∏—è</h4>
          <ul>
            <li><a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a></li>
            <li><a href="calculators.html">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä—ã</a></li>
            <li><a href="articles.html">–°—Ç–∞—Ç—å–∏</a></li>
            <li><a href="trading.html">–°–∏–º—É–ª—è—Ç–æ—Ä</a></li>
            <li><a href="about.html">–û –ø—Ä–æ–µ–∫—Ç–µ</a></li>
            <li><a href="contacts.html">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
          </ul>
        </div>
        <div class="footer-col">
          <h4>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h4>
          <p>Email: Chibo_bk33@top-academy.ru</p>
          <p>–¢–µ–ª–µ—Ñ–æ–Ω: +7 (999) 123-45-67</p>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 –®–ø–∞—Ä–≥–∞–ª–∫–∞ –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
      </div>
    </div>
  </footer>

  <script>
    let price = 100;
    let balance = 100000;
    let stocks = 0;
    const candles = [];

    const priceEl = document.getElementById('price');
    const balanceEl = document.getElementById('balance');
    const stocksEl = document.getElementById('stocks');
    const portfolioEl = document.getElementById('portfolio');
    const logEl = document.getElementById('log');

    function updateUI() {
      priceEl.textContent = price.toFixed(2);
      balanceEl.textContent = balance.toFixed(2);
      stocksEl.textContent = stocks;
      portfolioEl.textContent = (balance + stocks * price).toFixed(2);
    }

    const chartContainer = document.getElementById('chart');
    const chart = LightweightCharts.createChart(chartContainer, {
      layout: {
        textColor: '#000',
        backgroundColor: '#fff',
      },
      rightPriceScale: {
        borderVisible: true,
      },
      timeScale: {
        borderVisible: true,
      }
    });
    const candleSeries = chart.addCandlestickSeries({
      upColor: '#26a69a',
      downColor: '#ef5350',
      borderVisible: false,
      wickVisible: true
    });

    function newCandle() {
      const now = Date.now() / 1000;
      const open = price;
      const change = price * (Math.random() * 0.04 - 0.02);
      const close = Math.max(1, price + change);
      const high = Math.max(open, close) + Math.random() * 1.5;
      const low = Math.min(open, close) - Math.random() * 1.5;
      price = close;

      const candle = { time: now, open: open, high: high, low: low, close: close };
      candles.push(candle);
      if (candles.length > 40) candles.shift();

      candleSeries.setData(candles);
      updateUI();
      logEl.textContent = `üìà –ù–æ–≤–∞—è —Å–≤–µ—á–∞: ${close.toFixed(2)} ‚ÇΩ`;
      chart.timeScale().fitContent();
    }

    const lotInput = document.getElementById("lotCount");

    document.getElementById("buy").addEventListener("click", () => {
    const lots = Math.max(1, parseInt(lotInput.value) || 1);
    const totalCost = lots * price;

    if (balance >= totalCost) {
        balance -= totalCost;
        stocks += lots;
        updateUI();
        document.getElementById("log").textContent =
        `üü¢ –ö—É–ø–ª–µ–Ω–æ ${lots} ${lots === 1 ? "–∞–∫—Ü–∏—è" : "–∞–∫—Ü–∏–π"} –ø–æ ${price.toFixed(2)} ‚ÇΩ (–∏—Ç–æ–≥–æ: ${totalCost.toFixed(2)} ‚ÇΩ)`;
    } else {
        document.getElementById("log").textContent = "‚ö†Ô∏è –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤";
    }
    });

    document.getElementById("sell").addEventListener("click", () => {
    const lots = Math.max(1, parseInt(lotInput.value) || 1);

    if (stocks >= lots) {
        const totalGain = lots * price;
        balance += totalGain;
        stocks -= lots;
        updateUI();
        document.getElementById("log").textContent =
        `üî¥ –ü—Ä–æ–¥–∞–Ω–æ ${lots} ${lots === 1 ? "–∞–∫—Ü–∏—è" : "–∞–∫—Ü–∏–π"} –ø–æ ${price.toFixed(2)} ‚ÇΩ (–∏—Ç–æ–≥–æ: ${totalGain.toFixed(2)} ‚ÇΩ)`;
    } else {
        document.getElementById("log").textContent = "‚ö†Ô∏è –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∞–∫—Ü–∏–π";
    }
    });

    updateUI();
    for (let i = 0; i < 5; i++) newCandle();
    setInterval(newCandle, 4000);
  </script>
</body>
</html>